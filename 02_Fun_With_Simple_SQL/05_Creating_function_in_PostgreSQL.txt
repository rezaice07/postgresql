
--GENERATING RANDOM NUMBER
SELECT  RANDOM();

--CONVERTING TO TEXT
SELECT  '0.8354632327885023' :: TEXT;

--HASHING MD5
SELECT  MD5(RANDOM() :: TEXT);

--SUBSTRING
SELECT  SUBSTRING(MD5(RANDOM() :: TEXT), 0,20);



--FUNCTION CREATION
CREATE OR REPLACE FUNCTION FN_GENERATE_TOKEN() RETURNS VARCHAR(18) AS
$$
	SELECT  SUBSTRING(MD5(RANDOM() :: TEXT), 0,20) AS RESULT; 
$$
LANGUAGE SQL;


--CALLING FUNCTION
SELECT FN_GENERATE_TOKEN() AS MY_TOKEN;

DROP TABLE IF EXISTS USER_REG;

CREATE TABLE USER_REG 
(
	ID SERIAL PRIMARY KEY,
	USER_TOKEN TEXT DEFAULT FN_GENERATE_TOKEN(),
	USER_NAME VARCHAR(100) NOT NULL,
	CREATED_AT TIMESTAMPTZ not null DEFAULT NOW()	
)

INSERT INTO USER_REG ( USER_NAME ) VALUES('Rejwanul Reja');

SELECT * FROM USER_REG;



